# 情報ネットワーク第12回レポート

<div style="text-align: right;">
2025年7月8日  
学籍番号：35714121  
名前：福富隆大  
<br>
<br>
</div>  


### 1. 送信端末のあるネットワーク上で観測されるIPパケット

最大IPパケット長は1500バイト
IPヘッダは20バイト
UDPヘッダは8バイト

よって、送信端末のネットワークにおける最大IPパケット長は $1500 - 20 = 1480$ バイト
UDPデータグラム長は8バイトなので、UDPデータとして格納できる最大データ長は $1480 - 8 = 1472$ バイト

アプリケーションデータは7032バイト

これをUDPデータグラムに分割して送信

* **UDPデータグラム1つあたりのデータ長**: 1472バイト
* **UDPデータグラムの数**: $7032 \div 1472 = 4.77...$ なので、5つのUDPデータグラムに分割される
    * 最初の4つのUDPデータグラム: 1472バイト
    * 最後のUDPデータグラム: $7032 - (1472 \times 4) = 7032 - 5888 = 1144$ バイト

これらのUDPデータグラムがそれぞれIPパケットにカプセル化

* **最初の4つのIPパケット**:
    * UDPデータグラム長: 1472バイト
    * UDPヘッダ長: 8バイト
    * IPパケット長: $1472 (\text{データ}) + 8 (\text{UDPヘッダ}) + 20 (\text{IPヘッダ}) = 1500$ バイト
* **最後のIPパケット**:
    * UDPデータグラム長: 1144バイト
    * UDPヘッダ長: 8バイト
    * IPパケット長: $1144 (\text{データ}) + 8 (\text{UDPヘッダ}) + 20 (\text{IPヘッダ}) = 1172$ バイト

**観測されるIPパケット:**

* **パケット長**: 1500バイト
* **個数**: 4個

* **パケット長**: 1172バイト
* **個数**: 1個

**理由:** 送信端末では、アプリケーションデータを最大UDPデータグラム長（1472バイト）で分割し、それぞれを1つのIPパケットにカプセル化して送信するためです。

---

### 2. 受信端末で受信されるIPパケット

受信端末のあるネットワークの最大IPパケット長は580バイト
IPヘッダは20バイト

よって、IPパケットのデータ部（ペイロード）として格納できる最大データ長は $580 - 20 = 560$ バイト

送信端末から送られてきたIPパケットがこのネットワークに入ると、必要に応じてフラグメンテーション（分割）される

**送信端末からのIPパケット1 (1500バイト):**

ペイロード長は $1500 - 20 = 1480$ バイト
これを560バイトごとに分割

* 最初のフラグメント: 560バイト（データ） + 20バイト（IPヘッダ） = 580バイト
* 2番目のフラグメント: 560バイト（データ） + 20バイト（IPヘッダ） = 580バイト
* 3番目のフラグメント: $1480 - 560 - 560 = 360$ バイト（データ） + 20バイト（IPヘッダ） = 380バイト

合計3つのIPパケットが生成される

**送信端末からのIPパケット2 (1500バイト):**

上記と同様に3つのIPパケットが生成される

**送信端末からのIPパケット3 (1500バイト):**

上記と同様に3つのIPパケットが生成される

**送信端末からのIPパケット4 (1500バイト):**

上記と同様に3つのIPパケットが生成される

**送信端末からのIPパケット5 (1172バイト):**

ペイロード長は $1172 - 20 = 1152$ バイト
これを560バイトごとに分割

* 最初のフラグメント: 560バイト（データ） + 20バイト（IPヘッダ） = 580バイト
* 2番目のフラグメント: 560バイト（データ） + 20バイト（IPヘッダ） = 580バイト
* 3番目のフラグメント: $1152 - 560 - 560 = 32$ バイト（データ） + 20バイト（IPヘッダ） = 52バイト

合計3つのIPパケットが生成される

**観測されるIPパケット:**

* **パケット長**: 580バイト
* **個数**: 最初の4つのIPパケットから各2個ずつ、最後のIPパケットから2個生成されるため、$4 \times 2 + 2 = 10$個

* **パケット長**: 380バイト
* **個数**: 最初の4つのIPパケットから各1個ずつ生成されるため、4個

* **パケット長**: 52バイト
* **個数**: 最後のIPパケットから1個生成されるため、1個

**理由:** 受信端末側のネットワークの最大IPパケット長が送信端末側のネットワークよりも小さいため、IPパケットがフラグメンテーションされます。IPペイロードは8バイト単位で分割され、最大IPパケット長に合わせて新たなIPヘッダが付与されます。

---

### 3. 受信端末が受信する最初の4つのIPパケットに対するTL, ID, MF, FOの値



1.  **IPパケット１**
    * **Total Length (TL)**: 580
    * **Identification (ID)**: 100
    * **More Fragment (MF)**: 1 
    * **Fragment Offset (FO)**: 0 

2.  **IPパケット２**
    * **Total Length (TL)**: 580
    * **Identification (ID)**: 100
    * **More Fragment (MF)**: 1 
    * **Fragment Offset (FO)**: 70

3.  **IPパケット３**
    * **Total Length (TL)**: 380
    * **Identification (ID)**: 100
    * **More Fragment (MF)**: 0 
    * **Fragment Offset (FO)**: 140

4.  **IPパケット４**
    * **Total Length (TL)**: 580
    * **Identification (ID)**: 101
    * **More Fragment (MF)**: 1 
    * **Fragment Offset (FO)**: 0